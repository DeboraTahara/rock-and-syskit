<!DOCTYPE html>
<html lang="en">
    <head>
        <meta content="IE=edge" http-equiv="X-UA-Compatible">
        <meta charset="utf-8">
        <meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" name="viewport">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Robot Construction Toolkit</title>

        <link href="../images/favicon.ico" rel="icon" type="image/ico" relative="true" />
        <link href="../stylesheets/site.css" rel="stylesheet" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    </head>

    <body class="workspace workspace_day_to_day">
            <!-- top navbar -->
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="myNavbar">
                <ul class="nav navbar-nav">
                    <li><a href="../">Home</a></li>
                    <li><a href="../about.html">About</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3" role="complementary">
                <nav class="docs-sidebar" data-spy="affix">
                    <ul class="nav"><li class='child'><a href="../">Building robots with Rock and Syskit</a></li><li class='parent active'><span class='parent-label'><a href="./">The Workspace</a></span><ul><li class='child'><a href="./">Introduction</a></li><li class='child active'><a href="day_to_day.html">Day-to-day</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../syskit_basics/">Design Basics</a></span><ul><li class='child'><a href="../syskit_basics/">Introduction</a></li><li class='child'><a href="../syskit_basics/getting_started.html">Getting Started</a></li><li class='child'><a href="../syskit_basics/composition.html">Compositions</a></li><li class='child'><a href="../syskit_basics/constant_generator.html">Constant Generator</a></li><li class='child'><a href="../syskit_basics/devices.html">Devices</a></li><li class='child'><a href="../syskit_basics/deployment.html">Deployment</a></li><li class='child'><a href="../syskit_basics/recap.html">Recap</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../syskit_runtime/">Runtime Basics</a></span><ul><li class='child'><a href="../syskit_runtime/">Introduction</a></li><li class='child'><a href="../syskit_runtime/task_structure.html">Task Structures</a></li><li class='child'><a href="../syskit_runtime/event_loop.html">Event Loop</a></li><li class='child'><a href="../syskit_runtime/live_data.html">Live Data Visualization</a></li><li class='child'><a href="../syskit_runtime/exceptions.html">Errors</a></li><li class='child'><a href="../syskit_runtime/recap.html">Recap</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../syskit_coordination/">Coordination</a></span><ul><li class='child'><a href="../syskit_coordination/">Introduction</a></li></ul></li><li class='parent'><span class='parent-label'><a href="../syskit_error_handling/">Error Handling</a></span><ul><li class='child'><a href="../syskit_error_handling/">Introduction</a></li></ul></li></ul>
                </nav>
            </div>
            <div class="col-md-9" role="main">
                <h1 id="day-to-day-interaction-with-a-rock-installation">Day-to-day interaction with a Rock installation</h1>

<p>This page covers the autoproj commands and behavior that make most of the days
within a Rock workspace. More advanced topics are covered later in the
documentation.</p>

<h3 id="cli-help">CLI help</h3>

<p>At any point, the autoproj CLI is documented through the –help option.</p>

<div class="highlight"><pre class="highlight plaintext"><code>autoproj --help
</code></pre></div>
<h3 id="folder-structure">Folder Structure</h3>

<dl>
<dt>Workspace root</dt>
<dd>Where your ran <a href="index.html">the bootstrap</a>, and where the <code>env.sh</code> script is located</dd>
<dt>The autoproj/ folder</dt>
<dd>Located at the root of the workspace, it contains all the build configuration</dd>
<dt>Package</dt>
<dd>Packages are the unit that autoproj deals with. The Rock software is split
into separate types of packages that are defined in the build configuration.
The configuration tells Autoproj both the package type (how to install the
package) and where the package's source code is located (e.g. the github
repository).</dd>
<dt>OS Depedency or osdep</dt>
<dd>Packages in autoproj can either be checked out and built from source.
Alternatively, autoproj allows to interact with the host OS package system
(e.g. APT on Ubuntu). The osdep system is what makes this possible.</dd>
<dt>Build folders</dt>
<dd>When packages have build byproducts, they are saved within the package
build folder. This is by default the <code>build/</code> directory under the packages.</dd>
<dt>Prefix folder</dt>
<dd>Packages that require an install step will install under this folder. By
default the <code>install/</code> folder under the workspace root</dd>
<dt>Logs</dt>
<dd>The output of all commands ran by autoproj are redirected to separate files under <code>install/log/</code></dd>
</dl>

<h3 id="acd">Moving around</h3>

<p><code>acd</code> allows to move from package to package within the workspace. Because it
is a very common operation, <code>acd</code> accepts that each part of the package name be
shortened as long as the result is unambiguous.</p>

<p>For instance, in the default Rock installation:</p>

<div class="highlight"><pre class="highlight plaintext"><code>$ acd s/gaz
# Now in simulation/gazebo
$ acd c/k
multiple packages match 'c/k' in the current autoproj installation: control/kdl, control/kdl_parser
$ acd c/kdl
# Now in control/kdl
$ acd c/kdl_par
# Now in control/kdl_parser
</code></pre></div>
<p class="callout callout-info"><code>acd</code> expects package names. A few packages – mainly orogen, typelib and rtt
– do not include the package's category in them (they are named e.g. 'orogen'
but are installed in <code>tools/</code>)</p>

<h3 id="updating">Updating</h3>

<p>Most of the time, you will want to update the whole workspace (the <code>-k</code> option
continues updating even if errors occur). This will also update OS
dependencies.</p>

<div class="highlight"><pre class="highlight plaintext"><code>aup --all -k
</code></pre></div>
<p>If you want to restrict the update to a package and its dependencies, give its
name or path on the command line</p>

<div class="highlight"><pre class="highlight plaintext"><code>aup simulation/rock_gazebo
</code></pre></div>
<p>To restrict the update to the package, excluding its dependencies, add <code>--deps=f</code>.</p>

<p><code>--checkout-only</code> will not update already checked out packages, but
only check out not currently present in the system.</p>

<p class="callout callout-info"><code>aup</code> without arguments is equivalent to <code>aup .</code>, i.e. update the package
located in the current directory</p>

<p>In some situations, or if you're trying to keep track of all the changes that
are happening to your system, you want want to check what will be pulled by
<code>aup</code>. <code>autoproj status</code> allows to compare the status of the workspace w.r.t.
the repositories.</p>

<h3 id="building">Building</h3>

<p>To ensure that all changes have been built, run</p>

<div class="highlight"><pre class="highlight plaintext"><code>amake --all
</code></pre></div>
<p>As with <code>aup</code>, <code>-k</code> can be added to continue even under error. This is less
common for <code>amake</code>, though,  as a build error will usually cascade to its
dependencies.</p>

<p>If you want to restrict the build to a package and its dependencies, give its
name or path on the command line</p>

<div class="highlight"><pre class="highlight plaintext"><code>amake simulation/rock_gazebo
</code></pre></div>
<p>To restrict the build to the package, excluding its dependencies, add <code>--deps=f</code>.</p>

<p class="callout callout-info"><code>amake</code> without arguments is equivalent to <code>amake .</code>, i.e. build the package
located in the current directory</p>


            </div>
        </div>
    </div>

    <script>
    $('.docs-sidebar').affix({
        offset: {
            top: $('.docs-sidebar').offset().top
        }
    });
    </script>


        <footer class="container-fluid text-center">
        </footer>
    </body>
</html>
